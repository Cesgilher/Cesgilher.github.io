<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cesgilher</title>
    <description>A personal blog</description>
    <link>http://localhost:8000</link>
    <atom:link href="http://localhost:8000/feed.xml" rel="self" type="application/rss+xml" />
    <author>
      <name>Cesgilher</name>
      <email>cesgilher@gmail.com</email>
      <uri>cesgilher.github.io</uri>
    </author>
    
      <item>
        <title>Instalar Wireguard VPN en Ubuntu Server 22.04</title>
        <description>&lt;p&gt;En esta practica voy a explicar el proceso para configurar Wireguard VPN en Ubuntu Server 22.04&lt;/p&gt;

&lt;h3 id=&quot;instalación-de-wireguard&quot;&gt;Instalación de Wireguard&lt;/h3&gt;

&lt;p&gt;Lo primero como siempre en ubuntu es actualizar los repositorios y actualizar el sistema.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt upgrade
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;wireguard
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;configuración-del-servidor&quot;&gt;Configuración del servidor&lt;/h3&gt;

&lt;p&gt;Una vez instalado, vamos a crear el par de claves para el servidor.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;wg genkey | &lt;span class=&quot;nb&quot;&gt;sudo tee&lt;/span&gt; /etc/wireguard/privatekey | &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;wg pubkey | &lt;span class=&quot;nb&quot;&gt;sudo tee&lt;/span&gt; /etc/wireguard/publickey
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Esto generará la clave privada y la clave publica correspondiente a esta. Y las almacena en la carpeta de wireguard para que sean mas accesibles durante el resto del proceso.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Antes de seguir vamos a activar el bit de forwarding en el kernel de linux. Para ello vamos a editar el archivo de configuración del kernel.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nano /etc/sysctl.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Y añadimos la siguiente linea.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;net.ipv4.ip_forward&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora vamos a crear el archivo de configuración del servidor. Para ello vamos a crear un archivo de configuración en la carpeta de wireguard.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nano /etc/wireguard/wg0.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Dentro de este archivo vamos a añadir la siguiente configuración.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Interface]
Address &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &amp;lt;una ip dentro de la red que queramos que use la vpn&amp;gt;
SaveConfig &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true
&lt;/span&gt;ListenPort &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &amp;lt;puerto que queramos que use la vpn, por defecto el 51820&amp;gt;
PostUp &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; FORWARD &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; %i &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; iptables &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; nat &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; POSTROUTING &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &amp;lt;interfaz de salida&amp;gt; &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; MASQUERADE
PostDown &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; iptables &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; FORWARD &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; %i &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; iptables &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; nat &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; POSTROUTING &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &amp;lt;interfaz de salida&amp;gt; &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; MASQUERADE
PrivateKey &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &amp;lt;clave privada del servidor&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora vamos a crear el archivo de configuración del cliente. Para ello vamos a nuestro cliente y en caso de que sea windows, mediante el porgrama de wireguard, vamos a crear un nuevo tunel vacio. En caso de ser linux, vamos a crear un archivo de configuración en la carpeta de wireguard. Aqui vamos a añadir la siguiente configuración.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;```bash
[Interface]
Address = &amp;lt;una ip dentro de la red que queramos que use la vpn&amp;gt;
PrivateKey = &amp;lt;clave privada del cliente&amp;gt;
[Peer]
PublicKey = &amp;lt;clave publica del servidor&amp;gt;
Endpoint = &amp;lt;ip del servidor&amp;gt;:&amp;lt;puerto&amp;gt;
AllowedIPs =&amp;lt;las ips que queramos que suministre el servidor, en mi caso queremos llegar a la maquina que está en la 192.168.10.100 asi que pondremos 192.168.10.0/24&amp;gt;
```
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;De vuelta en el servidor, vamos a añadir la siguiente configuración al archivo de configuración del servidor.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Peer]
PublicKey &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &amp;lt;clave publica del cliente&amp;gt;
AllowedIPs &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &amp;lt;la ip que hayamos puesto en el archivo de configuración del cliente&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/9.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Para que todo esto funcione, vamos a abrir el puerto en el servidor.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;ufw allow &amp;lt;puerto&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;En caso de que quisieramos que la vpn se arranque con el sistema, hariamos un enable.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/6.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Aunque para la practica basta con un start.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/7.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora ya podemos activar la vpn.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;wg-quick up wg0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/10.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Y comprobar que funciona.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte1/11.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;En la imagen anterior, se puede ver como el ping no funciona cuando no estamos conectados a la vpn, pero si funciona cuando lo estamos.&lt;/p&gt;

&lt;h3 id=&quot;lista-de-iptables-utilizadas&quot;&gt;LIsta de iptables utilizadas&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;iptables &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; INPUT DROP
iptables &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; FORWARD DROP
iptables &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; OUTPUT DROP

&lt;span class=&quot;c&quot;&gt;#SSH&lt;/span&gt;
iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; INPUT &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; tcp &lt;span class=&quot;nt&quot;&gt;--dport&lt;/span&gt; 22 &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; 10.0.0.10/32 &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT
iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; OUTPUT &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; state &lt;span class=&quot;nt&quot;&gt;--state&lt;/span&gt;  established  &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; 10.0.0.10/32 &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT

&lt;span class=&quot;c&quot;&gt;#Para permitir la comunicacione entre windows y la maquina de la res interna&lt;/span&gt;
iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; INPUT &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; udp &lt;span class=&quot;nt&quot;&gt;--dport&lt;/span&gt; 51820 &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; 10.0.0.10/32 &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT
iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; INPUT &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; lo &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT

iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; FORWARD &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &amp;lt;interfaz_vpn&amp;gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &amp;lt;interfaz_interna&amp;gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; 192.168.10.100 &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT
iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; FORWARD &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &amp;lt;interfaz_interna&amp;gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &amp;lt;interfaz_vpn&amp;gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; 192.168.10.100 &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT

iptables &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; OUTPUT &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; lo &lt;span class=&quot;nt&quot;&gt;-j&lt;/span&gt; ACCEPT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;esquema-de-ips&quot;&gt;Esquema de IP’s&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Máquina&lt;/th&gt;
      &lt;th&gt;Adaptador Puente&lt;/th&gt;
      &lt;th&gt;Red Interna&lt;/th&gt;
      &lt;th&gt;VPN&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Servidor&lt;/td&gt;
      &lt;td&gt;10.1.1.1/8&lt;/td&gt;
      &lt;td&gt;192.168.10.1/24&lt;/td&gt;
      &lt;td&gt;172.16.10.1/24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows&lt;/td&gt;
      &lt;td&gt;10.0.0.10/8&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;172.16.10.10/24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lubuntu&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;192.168.10.100/24&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        <pubDate>Fri, 17 Feb 2023 00:00:00 +0100</pubDate>
        <link>http://localhost:8000//wireguard-ubuntu2204</link>
        <link href="http://localhost:8000/wireguard-ubuntu2204"/>
        <guid isPermaLink="true">http://localhost:8000/wireguard-ubuntu2204</guid>
      </item>
    
      <item>
        <title>Instalar Wireguard VPN en Docker</title>
        <description>&lt;p&gt;En esta practica voy a explicar el proceso para configurar Wireguard VPN dentro de Docker.&lt;/p&gt;

&lt;h3 id=&quot;instalación-de-wireguard&quot;&gt;Instalación de Wireguard&lt;/h3&gt;

&lt;p&gt;Lo primero como siempre en ubuntu es actualizar los repositorios y el sistema.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt upgrade
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;docker docker-compose
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte2/1.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/assets/Practica13 VPN/parte2/2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;creación-del-contenedor&quot;&gt;Creación del contenedor&lt;/h3&gt;

&lt;p&gt;Para crear el contenedor usaremos el siguiente comando. Esto creará un contenedor con el nombre wireguard,con la hora de Madrid, escuchando en el puerto 51820, y utilizando la imagen de Wireguard. Además guarda la configuración en caso de que se reinicie el servidor.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; wireguard &lt;span class=&quot;nt&quot;&gt;--cap-add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;NET_ADMIN &lt;span class=&quot;nt&quot;&gt;--cap-add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;SYS_MODULE &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;PUID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1000 &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;PGID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1000 &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;TZ&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Europe/Madrid &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;SERVERURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;PEERS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;laptop,tablet,phone &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;PEERDNS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 51820:51820/udp &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; wireguard_config:/config &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; /lib/modules:/lib/modules &lt;span class=&quot;nt&quot;&gt;--sysctl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;net.ipv4.conf.all.src_valid_mark=1&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--restart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;unless-stopped linuxserver/wireguard
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte2/3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Dado que hemos especificado que queremos de peers laptop,tablet y phone, al arrancar el contenedor se generarán los QRs necesarios para que estos se conecten al servidor sin necesidad de mayor configuración. Pero en este caso vamos a conectarnos mediante el cliente de Wireguard para Windows. Así que podemos omitir esa orden a la hora de crear el contenedor.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte2/4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;configuración-del-contenedor&quot;&gt;Configuración del contenedor&lt;/h3&gt;

&lt;p&gt;Ahora que ya está corriendo el contenedor, vamos a configurarlo. Para ello vamos a entrar en el contenedor e instalar un editor de texto.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; wireguard /bin/bash
apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;nano
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte2/5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;A partir de aquí los pasos son los mismos que los de la &lt;a href=&quot;wireguard-ubuntu2204&quot;&gt;practica anterior.&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;conexión&quot;&gt;Conexión&lt;/h3&gt;
&lt;p&gt;Para está práctica he cambiado tanto la red de la VPN como la de la red interna, para que sea distinta a la anterior.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte2/7.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;pruba-de-conexión&quot;&gt;Pruba de conexión&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte2/8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;esquema-de-ips&quot;&gt;Esquema de IP’s&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Máquina&lt;/th&gt;
      &lt;th&gt;Adaptador Puente&lt;/th&gt;
      &lt;th&gt;Red Interna&lt;/th&gt;
      &lt;th&gt;VPN&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Servidor&lt;/td&gt;
      &lt;td&gt;10.1.1.2/8&lt;/td&gt;
      &lt;td&gt;192.168.80.1/24&lt;/td&gt;
      &lt;td&gt;172.16.0.1/24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows&lt;/td&gt;
      &lt;td&gt;10.0.0.10/8&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;172.16.0.10/24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lubuntu&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;192.168.80.100/24&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        <pubDate>Fri, 17 Feb 2023 00:00:00 +0100</pubDate>
        <link>http://localhost:8000//wireguard-docker</link>
        <link href="http://localhost:8000/wireguard-docker"/>
        <guid isPermaLink="true">http://localhost:8000/wireguard-docker</guid>
      </item>
    
      <item>
        <title>Conectar dos redes mediante Wireguard VPN</title>
        <description>&lt;p&gt;En esta práctica vamos a usar Wireguard para conectar dos redes.&lt;/p&gt;

&lt;h3 id=&quot;configuración-de-wireguard&quot;&gt;Configuración de Wireguard&lt;/h3&gt;

&lt;p&gt;Para está práctica vamos a utilizar las máquinas de las dos prácticas anteriores.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;wireguard-ubuntu2204&quot;&gt;parte 1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;wireguard-docker&quot;&gt;parte 2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Dado que ya tenemos Wireguard instalado en ambas máquinas, vamos a configurar la VPN. Para ello basta con poner la configuración de cada servidor, como peer del otro.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte3/1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Si activamos la vpn en ambas máquinas, y usamos el comando wg, podemos ver que están conectadas exitosamente.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte3/2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;prueba-de-conexión&quot;&gt;Prueba de conexión&lt;/h3&gt;

&lt;p&gt;Para ver que no hay trampa alguna, vamos a realizar un intento de ping entre los dos clientes para ver que no funciona.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte3/3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ahora vamos a ver que pasa si activamos la VPN en ambas máquinas.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/Practica13 VPN/parte3/4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Como podemos ver, ahora sí es capaz de llegar a la maquina destino volver con los correspondientes echo reply.&lt;/p&gt;

&lt;h3 id=&quot;esquema-de-ips&quot;&gt;Esquema de IP’s&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Máquina&lt;/th&gt;
      &lt;th&gt;Adaptador Puente&lt;/th&gt;
      &lt;th&gt;Red Interna&lt;/th&gt;
      &lt;th&gt;VPN&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Servidor1&lt;/td&gt;
      &lt;td&gt;10.1.1.1/8&lt;/td&gt;
      &lt;td&gt;192.168.10.1/24&lt;/td&gt;
      &lt;td&gt;172.16.0.1/24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lubuntu1&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;192.168.10.100/24&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Servidor2&lt;/td&gt;
      &lt;td&gt;10.1.1.2/8&lt;/td&gt;
      &lt;td&gt;192.168.80.1/24&lt;/td&gt;
      &lt;td&gt;172.16.0.2/24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lubuntu1&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;192.168.80.100/24&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        <pubDate>Fri, 17 Feb 2023 00:00:00 +0100</pubDate>
        <link>http://localhost:8000//wireguard-3</link>
        <link href="http://localhost:8000/wireguard-3"/>
        <guid isPermaLink="true">http://localhost:8000/wireguard-3</guid>
      </item>
    
      <item>
        <title>Vulnhub DC-1.1</title>
        <description>&lt;p&gt;&lt;strong&gt;Resolucion de la maquina DC-1.1 de Vulnhub&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.vulnhub.com/entry/dc-1,292/&quot;&gt;Link al ejercicio&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Hoy vamos a resolver la Maquina DC-1.1 de Vulnhub, la cual es una maquina de Windows Server 2008 R2. La maquina es bastante sencilla, pero es una buena practica para empezar a resolver maquinas de Vulnhub.&lt;/p&gt;

&lt;h2 id=&quot;escaneo-de-puertos&quot;&gt;Escaneo de puertos&lt;/h2&gt;

&lt;p&gt;Para empezar, vamos a realizar un escaneo de puertos con nmap para ver que puertos tenemos abiertos en la maquina.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; nmap/initial
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/0Z7ZQ9M.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que tenemos los puertos 80, 139 y 445 abiertos. Vamos a empezar por el puerto 80, que es el que mas nos interesa.&lt;/p&gt;

&lt;h2 id=&quot;escaneo-de-servicios&quot;&gt;Escaneo de servicios&lt;/h2&gt;

&lt;p&gt;Vamos a realizar un escaneo de servicios con nmap para ver que servicios tenemos corriendo en los puertos que tenemos abiertos.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 80,139,445 &lt;span class=&quot;nt&quot;&gt;-sV&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sC&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; nmap/services
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/1Z0ZQ9M.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que tenemos el servicio http corriendo en el puerto 80. Vamos a ver que tenemos en el puerto 139 y 445.&lt;/p&gt;

&lt;h2 id=&quot;escaneo-de-smb&quot;&gt;Escaneo de SMB&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nmap &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 139,445 &lt;span class=&quot;nt&quot;&gt;--script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;smb-enum-shares.nse,smb-enum-users.nse &lt;span class=&quot;nt&quot;&gt;-oN&lt;/span&gt; nmap/smb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/2Z0ZQ9M.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que tenemos un usuario llamado “Administrator” y un share llamado “Public”. Vamos a ver que tenemos en el share “Public”.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;smbclient &lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\\\\&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/3Z0ZQ9M.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que tenemos un share llamado “DC-1.1”. Vamos a ver que tenemos en el share “DC-1.1”.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;smbclient &lt;span class=&quot;se&quot;&gt;\\\\&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/4Z0ZQ9M.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Vemos que tenemos un archivo llamado “DC-1.1.txt”. Vamos a ver que tenemos en el archivo “DC-1.1.txt”.&lt;/p&gt;

&lt;h2 id=&quot;escaneo-de-http--80&quot;&gt;Escaneo de HTTP  (80)&lt;/h2&gt;

&lt;p&gt;Vamos a ver que tenemos en el puerto 80.&lt;/p&gt;

&lt;p&gt;……&lt;/p&gt;

</description>
        <pubDate>Mon, 13 Feb 2023 00:00:00 +0100</pubDate>
        <link>http://localhost:8000//VulnHub-DC-1.1</link>
        <link href="http://localhost:8000/VulnHub-DC-1.1"/>
        <guid isPermaLink="true">http://localhost:8000/VulnHub-DC-1.1</guid>
      </item>
    
      <item>
        <title>¿Qué es un ataque de denegación de servicio o DDoS?</title>
        <description>&lt;h2 id=&quot;qué-es-un-ataque-ddos&quot;&gt;¿Qué es un ataque DDoS?&lt;/h2&gt;

&lt;p&gt;Un ataque DDoS es un tipo de ataque cibernético en el que se inunda un servidor o una red con una gran cantidad de solicitudes falsas, lo que hace que se colapse y no pueda proporcionar servicios a los usuarios legítimos. Este tipo de ataque se lleva a cabo mediante el uso de una red distribuida de dispositivos comprometidos (comúnmente conocidos como “zombis”) que envían solicitudes masivas al objetivo.&lt;/p&gt;

&lt;p&gt;El objetivo de un ataque DDoS es negar el acceso a un recurso en línea, ya sea un sitio web, un servicio en la nube o cualquier otro recurso en línea que dependa de una conexión a Internet para funcionar.&lt;/p&gt;

&lt;h2 id=&quot;datos-relevantes-sobre-los-ataques-ddos&quot;&gt;Datos relevantes sobre los ataques DDoS&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Característica&lt;/th&gt;
      &lt;th&gt;Descripción&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Tipo de ataque&lt;/td&gt;
      &lt;td&gt;Denegación de Servicio Distribuido&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Modo de operación&lt;/td&gt;
      &lt;td&gt;Inundación de solicitudes falsas a un servidor o red&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Fuente&lt;/td&gt;
      &lt;td&gt;Red distribuida de dispositivos comprometidos&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Objetivo&lt;/td&gt;
      &lt;td&gt;Negar el acceso a un recurso en línea&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        <pubDate>Tue, 27 Dec 2022 00:00:00 +0100</pubDate>
        <link>http://localhost:8000//DDos-attack</link>
        <link href="http://localhost:8000/DDos-attack"/>
        <guid isPermaLink="true">http://localhost:8000/DDos-attack</guid>
      </item>
    
      <item>
        <title>Instalación y configuración de MicroTik</title>
        <description>&lt;h2 id=&quot;instalación-y-configuración-de-microtik&quot;&gt;Instalación y configuración de MicroTik&lt;/h2&gt;

&lt;p&gt;MicroTik es un sistema operativo basado en Linux que se utiliza para controlar redes y dispositivos de red. Se utiliza ampliamente en pequeñas y medianas empresas, ISPs y entornos domésticos para brindar una amplia gama de funciones, incluido el enrutamiento, la gestión de redes y la seguridad.&lt;/p&gt;

&lt;p&gt;A continuación, se describen los pasos básicos para instalar y configurar MicroTik:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Descarga del software: Descargue la última versión del software de la página web oficial de MicroTik.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Instalación en el dispositivo: Siga las instrucciones de instalación para instalar el software en el dispositivo MicroTik.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configuración inicial: Acceda a la interfaz de usuario de MicroTik y configure la dirección IP, la máscara de subred y la puerta de enlace predeterminada.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configuración de la red: Configure los detalles de la red, incluidos los nombres de los servidores DNS, la configuración DHCP y la asignación de direcciones IP estáticas.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configuración de seguridad: Configure los ajustes de seguridad, incluida la creación de reglas de firewall y la configuración de opciones de autenticación.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Es importante tener en cuenta que la configuración detallada de MicroTik depende de las necesidades y requisitos de cada red y entorno, por lo que es recomendable consultar la documentación oficial y los recursos en línea para obtener información más detallada sobre cómo configurar y administrar MicroTik de manera efectiva.&lt;/p&gt;

</description>
        <pubDate>Fri, 07 May 2021 00:00:00 +0200</pubDate>
        <link>http://localhost:8000//Install-microtik</link>
        <link href="http://localhost:8000/Install-microtik"/>
        <guid isPermaLink="true">http://localhost:8000/Install-microtik</guid>
      </item>
    
  </channel>
</rss>
